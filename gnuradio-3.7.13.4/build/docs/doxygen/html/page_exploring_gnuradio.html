<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>GNU Radio Manual and C++ API Reference: Exploring GNU Radio</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="gnuradio_logo_icon.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">GNU Radio Manual and C++ API Reference
   &#160;<span id="projectnumber">3.7.13.4</span>
   </div>
   <div id="projectbrief">The Free &amp; Open Software Radio Ecosystem</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('page_exploring_gnuradio.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Properties</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(13)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Exploring GNU Radio </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Let's explore over two examples that are shipped with GNU Radio. We start off with a very simple dial tone generating example that is done in Python. The second example uses both GNU Radio Companion (GRC) and Python for different stages of the example.</p>
<p>In either case, we will be actually working with Python code and the modules as they exist in Python. However, in the following discussion, we will refer to each block using the full C++ namespace so that we can easily link to the block's documentation inside the manual.</p>
<p>The example files discussed in this page are installed with the documentation and are located in $prefix/share/doc/gnuradio-$version/.</p>
<h1><a class="anchor" id="ex_dial_tone"></a>
Dial Tone Example</h1>
<p>This example is found in the dial_tone.py file and constructs a very simple GNU Radio application that combines two sine waves to create a dial tone. It calls a function to construct the flowgraph which handles generating the signal sources.</p>
<p>The build_graph function sets up the sampling rate, which we will use to set the rate of the audio sink as well as the amplitude, which we use to scale the signal to control the volume of the output. We then create a top_block. The top_block is the object that holds the flowgraph, the basic data structure of a GNU Radio application. We will use the top_block to connect together and hold the signal processing blocks, which we build next.</p>
<p>This example uses three signal processing blocks. The first two are gr::analog::sig_source_f blocks, which generate sine waves at frequencies 350 and 440 Hz. We next create the connection to the speaker system using <a class="el" href="classgr_1_1audio_1_1sink.html" title="Creates a sink from an audio device. ">gr::audio::sink</a>, which takes in the sample rate it will use to produce the output signal. The audio sink block can also take in a second parameter to set the output device name, which we use if there is a resource conflict or if using a sampling rate that the hardware won't naturally support. Common device names are "pulse" if using PulseAudio or "plughw:0,0", which is an ALSA device that can handle resampling.</p>
<p>We next take the three blocks we've built and connect together the flowgraph. The flowgraph connects sources to sinks through other signal processing blocks. Here, we are directly connecting two sources to a single sink. The next example uses more complex flowgraphs to further explore these concepts. The two lines containing the "tb.connect" statements are where the connections are made. The flowgraph will look like:</p>
<pre class="fragment">sig_source_f (freq = 350) --&gt;
                              audio.sink
sig_source_f (freq = 440) --&gt;
</pre><p>We're inputting two signals into a single block, which with the audio sink allows us to output in stereo. The two signals combine to form the dual frequencies of a standard dial tone.</p>
<p>In the connection of the signal source to the audio sink, notice how we specify the sink as a Python tuple, (dst, X). Technically, we specify all connections as ((source block, port out), (sink block, port in)) because each block that outputs samples can have multiple output ports just as a block that receives samples can have multiple input ports. However, in the case of a gr::analog::sig_source_f, it only produces samples on a single output and so the output port of 0 is implied. Otherwise, we could write this as "tb.connect((src0, 0),
(dst,0))" for complete representation of the connection.</p>
<p>When we are done connecting the blocks, we have a flowgraph in the object "tb". While it's connected, the sources are not generating any samples. We have to start running the flowgraph. In the main section, we return the top_block object and then call the "start" function on it. This is a non-blocking call that launches the flowgraph's main thread, which initiates the sources to start sending samples through the flowgraph. We then block until the user presses "Enter" at which point we call the flowgraph's "stop" function to shut it down.</p>
<h1><a class="anchor" id="ex_fm_demod"></a>
FM Demodulator</h1>
<p>This example can be done completely in GRC or both GRC and Python. We will generate an FM signal using GRC first and then using either a GRC program or an example in Python to demodulate and play it back.</p>
<h2><a class="anchor" id="Modulator"></a>
Modulator</h2>
<p>We first launch GRC using the terminal command "gnuradio-companion". This starts the graphical interface to create our flowgraphs. We won't explore the GRC interface here; just use it to generate a data file. With GRC launched, open the file "fm_tx.grc". Exploring this flowgraph, it generates the dial tone frequencies, adds them together, resamples the signal so we can use integer upsampling in the wideband FM transmitter block (WBFM Transmit) and output the data. While this is happening, we're also outputting the original signal to the audio system as well as viewing it in time and frequency at different stages.</p>
<p>The intent of this example is to generate a frequency-modulated dial tone signal and save it to a file. While saving it to a file, we only want to generate a signal large enough to make use of it, but it doesn't have to be too large. So we put a <a class="el" href="classgr_1_1blocks_1_1head.html" title="copies the first N items to the output then signals done ">gr::blocks::head</a> block that limits the number of samples into the file sink. Once this block has seen N number of samples, it will stop the flowgraph. Meanwhile, we use a <a class="el" href="classgr_1_1blocks_1_1skiphead.html" title="skips the first N items, from then on copies items to the output ">gr::blocks::skiphead</a> block to ignore the first M samples, which helps us avoid the transients and group delay of the filters in the system.</p>
<p>We run this either using the menu "Build-&gt;Execute" or using the play button on the toolbar. It will run for a short amount of time and stop once the head has seen the items set in the "nitems" parameter. The result is a file "dummy.dat" that contains the complex FM samples.</p>
<h2><a class="anchor" id="Demodulator"></a>
Demodulator</h2>
<p>The demodulator part is shown in both a GRC graph and as a Python script. Both the GRC graph, "fm_rx.grc", and the Python script, "fm_demod.py", do the same thing and basically reverse the stages of the modulator. It uses a <a class="el" href="classgr_1_1blocks_1_1file__source.html" title="Read stream from file. ">gr::blocks::file_source</a> to read the "dummy.dat" file we created previously. This is sent to the FM demodulator, which is simply implemented here using the <a class="el" href="classgr_1_1analog_1_1quadrature__demod__cf.html" title="quadrature demodulator: complex in, float out ">gr::analog::quadrature_demod_cf</a>. This demodulates the signal and converts the complex FM signal to a float signal.</p>
<p>We then resample it from the input signal at 200 ksps to the audio rate of 44.1 ksps. Because this resampling cannot be done using an integer decimation rate, we use an arbitrary resampler, the <a class="el" href="classgr_1_1filter_1_1pfb__arb__resampler__fff.html" title="Polyphase filterbank arbitrary resampler with float input, float output and float taps...">gr::filter::pfb_arb_resampler_fff</a> block, that allows us to resample at any rate as well as filter the signal to the audio rate we want. The output of this block is filtered to a 15 kHz bandwidth at a sample rate of 44.1 ksps, which is ready for the <a class="el" href="classgr_1_1audio_1_1sink.html" title="Creates a sink from an audio device. ">gr::audio::sink</a> block.</p>
<p>Both the GRC and Python files can be explored further to better understand the operations of the blocks. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
